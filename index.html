<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>My Site</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="entrance-wrapper">
        <main class="entrance-card card" role="main" aria-labelledby="entranceTitle">
            <h1 id="entranceTitle" class="names">Happy Monthsary Baby!!!!!!!</h1>
            <p class="sub">Enter the Password</p>

            <form id="loginForm" class="login-form" novalidate>
                <div class="date-inputs" role="group" aria-label="Enter our special date">
                    <label class="sr-only" for="month">Month</label>
                    <input id="month" name="month" type="text" inputmode="text" placeholder="Month" class="date-input" autocomplete="off" aria-label="Month">

                    <label class="sr-only" for="day">Day</label>
                    <input id="day" name="day" type="text" inputmode="numeric" placeholder="Day" class="date-input" autocomplete="off" aria-label="Day">

                    <label class="sr-only" for="year">Year</label>
                    <input id="year" name="year" type="text" inputmode="numeric" placeholder="Year" class="date-input" autocomplete="off" aria-label="Year">
                </div>

                <div id="error" class="error" aria-live="polite" role="status"></div>

                <button type="submit" class="btn primary enter-btn">Enter</button>
            </form>

            <p class="hint">I love you!</p>
        </main>
    </div>

    <div class="floating-hearts" aria-hidden="true"></div>
    <div id="transitionOverlay" class="transition-overlay" aria-hidden="true"></div>

    <script>
        (function(){
            const correct = 'iloveyou';
            const form = document.getElementById('loginForm');
            const err = document.getElementById('error');
            const overlay = document.getElementById('transitionOverlay');
            const card = document.querySelector('.entrance-card');

            // create subtle static background hearts on load
            (function createStaticBackgroundHearts(){
                const container = document.querySelector('.floating-hearts');
                if(!container) return;
                const counts = [ {x:'6%', y:'10%', s:120, o:0.04}, {x:'92%', y:'14%', s:80, o:0.03}, {x:'18%', y:'78%', s:150, o:0.03}, {x:'84%', y:'82%', s:100, o:0.025} ];
                counts.forEach(c=>{
                    const el = document.createElement('span');
                    el.className = 'bg-heart';
                    el.style.left = c.x; el.style.top = c.y; el.style.width = c.s+'px'; el.style.height = c.s+'px'; el.style.opacity = c.o; el.style.fontSize = c.s+'px';
                    container.appendChild(el);
                });
            })();

            function showError(msg){
                err.textContent = msg;
                err.classList.add('shake');
                setTimeout(()=> err.classList.remove('shake'), 600);
            }

            function playTransitionAndRedirect(){
                // disable button and inputs
                form.querySelector('button').disabled = true;
                ['month','day','year'].forEach(id=>document.getElementById(id).disabled = true);
                card.classList.add('closing');
                overlay.classList.add('play');

                // big purple heart
                const big = document.createElement('div');
                big.className = 't-big-heart';
                big.innerHTML = '<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 21s-8.5-6.1-8.5-11.2C3.5 6.3 6.7 4 9.3 4c1.6 0 2.7.9 2.7.9S13 4 14.7 4c2.6 0 5.8 2.3 5.8 5.8C20.5 14.9 12 21 12 21z" fill="hsla(260,82%,60%,1)"/></svg>';
                overlay.appendChild(big);

                // trigger appear
                requestAnimationFrame(()=> big.classList.add('pop'));

                // also spawn a few small hearts for sparkle
                const rect = form.getBoundingClientRect();
                const cx = rect.left + rect.width/2;
                const cy = rect.top + rect.height/2;
                for(let i=0;i<8;i++){
                    const h = document.createElement('span');
                    h.className = 't-heart';
                    const size = 8 + Math.random()*18;
                    h.style.width = size+'px';
                    h.style.height = size+'px';
                    const dx = (Math.random()-0.5)*rect.width*0.8;
                    const dy = (Math.random()-0.5)*rect.height*0.5;
                    h.style.left = (cx + dx - size/2) + 'px';
                    h.style.top = (cy + dy - size/2) + 'px';
                        const hue = 220 + Math.round(Math.random()*60); // purple -> light-blue range
                    h.innerHTML = '<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 21s-8.5-6.1-8.5-11.2C3.5 6.3 6.7 4 9.3 4c1.6 0 2.7.9 2.7.9S13 4 14.7 4c2.6 0 5.8 2.3 5.8 5.8C20.5 14.9 12 21 12 21z" fill="hsla('+hue+',72%,64%,1)"/></svg>';
                    overlay.appendChild(h);
                    h.style.animationDelay = (Math.random()*0.6)+'s';
                    h.addEventListener('animationend', ()=> h.remove());
                }

                // redirect after ~1.4s
                setTimeout(()=> window.location.href = 'celebration.html', 1400);
            }

            form.addEventListener('submit', function(e){
                e.preventDefault();
                const m = document.getElementById('month').value.trim();
                const d = document.getElementById('day').value.trim();
                const y = document.getElementById('year').value.trim();
                // expected values: June, 21, 2025 (case-insensitive for month)
                if(!m || !d || !y){
                    showError('Please enter the full date ❤️');
                    return;
                }
                if(m.toLowerCase() === 'june' && d === '21' && y === '2025'){
                    playTransitionAndRedirect();
                } else {
                    document.getElementById('month').value = '';
                    document.getElementById('day').value = '';
                    document.getElementById('year').value = '';
                    showError('Wrong date, try again ❤️');
                }
            });
        })();
    </script>
</body>
</html>